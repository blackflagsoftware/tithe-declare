import{d as E,r as g,J as A,x as v,y as x,z as e,A as w,K as z,L as N,M as D,N as P,O as W,P as X,o as Y,B as M,D as O}from"./_J1N5LE9.js";import{B as R,a as S}from"./e8YS3tKj.js";import{a as Z}from"./D3r0DRHi.js";import{m as p}from"./Cki1o9vr.js";const ee={class:"fixed inset-0 transition-opacity bg-gray-50 bg-opacity-75"},te={tabindex:"-1",class:"fixed z-50 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-auto bg-white dark:bg-gray-900 rounded-md px-4 py-2 space-y-5 drop-shadow-lg"},oe={class:"relative p-4 w-full max-w-2xl max-h-full"},le={class:"relative bg-white dark:bg-gray-900 rounded-lg shadow dark:bg-black"},re={class:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:bg-gray-900 dark:border-gray-600"},ae={class:"text-xl font-semibold text-gray-900 dark:text-white"},ne={class:"p-4 md:p-5 space-y-8 dark:bg-gray-900"},se={class:"list-none pl-0 mt-0"},de=["id","value","checked","onChange"],ie=["htmlFor"],ue={class:"flex items-center p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-gray-600 dark:bg-gray-900"},ce=E({__name:"login-modal",props:{titleText:{},login:{},roles:{}},emits:["clickSubmit","clickCancel"],setup($,{emit:_}){const a=_,c=$,r=g("Login"),l=g(""),n=g(""),d=g(new Array),i=g(new Array);function f(){const u={id:l.value,email_address:n.value,roles_selected:i.value};a("clickSubmit",u),b()}function h(){b(),a("clickCancel")}function k(u){i.value=i.value.map((s,m)=>u===m?!s:s)}function b(){l.value="",n.value="",d.value=[],i.value=[]}return A(()=>c.login,u=>{u&&(l.value=u.id,n.value=u.email_address,d.value=u.roles,i.value=u.roles_selected)},{immediate:!0}),A(()=>c.titleText,u=>{r.value=u},{immediate:!0}),(u,s)=>(x(),v("div",ee,[e("div",te,[e("div",oe,[e("div",le,[e("div",re,[e("p",ae,w(r.value),1),e("button",{type:"button",class:"text-gray-400 bg-transparent hover:bg-gray-50 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white",onClick:s[0]||(s[0]=m=>h())},[...s[4]||(s[4]=[e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1),e("span",{class:"sr-only"},"Close modal",-1)])])]),e("div",ne,[e("div",null,[s[5]||(s[5]=e("label",{for:"email",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Email",-1)),z(e("input",{id:"email",type:"text","onUpdate:modelValue":s[1]||(s[1]=m=>n.value=m),class:"bg-gray-200 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 w-96",placeholder:" ",required:"",autocomplete:"email"},null,512),[[N,n.value]]),s[6]||(s[6]=e("p",{class:"text-base mt-4 mb-2"},"Roles",-1)),e("ul",se,[(x(!0),v(D,null,P(c.roles,(m,L)=>(x(),v("div",null,[(x(),v("li",{key:L},[e("input",{id:m.id.toString(),type:"checkbox",value:m.name,checked:i.value[L],class:"mr-2",onChange:V=>k(L)},null,40,de),e("label",{htmlFor:m.id},w(m.name),9,ie)]))]))),256))])])]),e("div",ue,[e("button",{onClick:s[2]||(s[2]=m=>f()),type:"button",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},"Submit"),e("button",{onClick:s[3]||(s[3]=m=>h()),type:"button",class:"py-2.5 px-5 ms-3 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-100 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700"},"Cancel")])])])])]))}}),ge={class:"fixed inset-0 transition-opacity bg-gray-200 bg-opacity-75"},be={tabindex:"-1",class:"fixed z-50 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-auto bg-white dark:bg-gray-900 rounded-md px-4 py-2 space-y-5 drop-shadow-lg"},me={class:"relative p-4 w-full max-w-2xl max-h-full"},pe={class:"relative bg-white dark:bg-gray-900 rounded-lg shadow dark:bg-black"},ke={class:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:bg-gray-900 dark:border-gray-600"},ye={class:"text-xl font-semibold text-gray-900 dark:text-white"},ve={class:"p-4 md:p-5 space-y-8 dark:bg-gray-900"},xe={class:"flex items-center p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-gray-600 dark:bg-gray-900"},fe=E({__name:"delete-modal",props:{recordType:{},name:{}},emits:["clickSubmit","clickCancel"],setup($,{emit:_}){const a=$,c=g("Doh");return A(()=>a.name,r=>{c.value=r},{immediate:!0}),(r,l)=>(x(),v("div",ge,[e("div",be,[e("div",me,[e("div",pe,[e("div",ke,[e("p",ye,"Delete "+w(r.$props.recordType),1),e("button",{type:"button",class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white",onClick:l[0]||(l[0]=n=>r.$emit("clickCancel"))},[...l[3]||(l[3]=[e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1),e("span",{class:"sr-only"},"Close modal",-1)])])]),e("div",ve," Delete "+w(r.$props.recordType)+" with name: "+w(W(c))+"? ",1),e("div",xe,[e("button",{onClick:l[1]||(l[1]=n=>r.$emit("clickSubmit")),type:"button",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},"Delete"),e("button",{onClick:l[2]||(l[2]=n=>r.$emit("clickCancel")),type:"button",class:"py-2.5 px-5 ms-3 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-100 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700"},"Cancel")])])])])]))}}),he={class:"fixed inset-0 transition-opacity bg-gray-50 bg-opacity-75"},we={tabindex:"-1",class:"fixed z-50 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-auto bg-white dark:bg-gray-900 rounded-md px-4 py-2 space-y-5 drop-shadow-lg"},_e={class:"relative p-4 w-full max-w-2xl max-h-full"},Ce={class:"relative bg-white dark:bg-gray-900 rounded-lg shadow dark:bg-black"},$e={class:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:bg-gray-900 dark:border-gray-600"},Te={class:"text-xl font-semibold text-gray-900 dark:text-white"},Re={class:"p-4 md:p-5 space-y-8 dark:bg-gray-900"},Le=E({__name:"role-modal",props:{titleText:{},role:{}},emits:["clickSubmit","clickCancel"],setup($,{emit:_}){const a=_,c=$,r=g("Role"),l=g(""),n=g(""),d=g("");function i(){const k={id:l.value,name:n.value,description:d.value};a("clickSubmit",k),h()}function f(){h(),a("clickCancel")}function h(){l.value="",n.value="",d.value=""}return A(()=>c.role,k=>{k&&(l.value=k.id,n.value=k.name,d.value=k.description)},{immediate:!0}),A(()=>c.titleText,k=>{r.value=k},{immediate:!0}),(k,b)=>(x(),v("div",he,[e("div",we,[e("div",_e,[e("div",Ce,[e("div",$e,[e("p",Te,w(r.value),1),e("button",{type:"button",class:"text-gray-400 bg-transparent hover:bg-gray-50 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white",onClick:f},[...b[2]||(b[2]=[e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1),e("span",{class:"sr-only"},"Close modal",-1)])])]),e("div",Re,[e("div",null,[b[3]||(b[3]=e("label",{for:"name",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Name",-1)),z(e("input",{id:"name",type:"text","onUpdate:modelValue":b[0]||(b[0]=u=>n.value=u),class:"bg-gray-200 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 w-96",placeholder:" ",required:"",autocomplete:"name"},null,512),[[N,n.value]])]),e("div",null,[b[4]||(b[4]=e("label",{for:"description",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white"},"Description",-1)),z(e("input",{id:"description",type:"text","onUpdate:modelValue":b[1]||(b[1]=u=>d.value=u),class:"bg-gray-200 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 w-96",placeholder:" ",required:"",autocomplete:"description"},null,512),[[N,d.value]])])]),e("div",{class:"flex items-center p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-gray-600 dark:bg-gray-900"},[e("button",{onClick:i,type:"button",class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},"Submit"),e("button",{onClick:f,type:"button",class:"py-2.5 px-5 ms-3 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-100 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700"},"Cancel")])])])])]))}}),Se={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},Ae={class:"w-full text-sm text-left rtl:text-right text-gray-600 dark:text-gray-400"},Me={class:"odd:bg-white odd:dark:bg-gray-900 even:bg-gray-200 even:dark:bg-gray-800 border-b dark:border-gray-700"},De={scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},Ee={class:"px-6 py-4"},Be={class:"px-6 py-4"},je=["onClick"],ze=["onClick"],Ne={class:"relative overflow-x-auto shadow-md sm:rounded-lg"},Pe={class:"w-full text-sm text-left rtl:text-right text-gray-600 dark:text-gray-400"},Ve={class:"odd:bg-white odd:dark:bg-gray-900 even:bg-gray-200 even:dark:bg-gray-800 border-b dark:border-gray-700"},Oe={scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white"},Fe={class:"px-6 py-4"},He={class:"px-6 py-4"},Ie=["onClick"],qe=["onClick"],Qe=E({__name:"admin",setup($){const _=g(new Array),a=g(new Array),c=g(R(a.value)),r=g(S()),l=g(!0),n=g(R(a.value)),{getAuthHeader:d}=X(),i=Z();function f(){i("/login/roles",{method:"GET",headers:d()}).then(o=>{_.value=o.data.data})}function h(){i("/role/search",{method:"POST",body:{},headers:d()}).then(o=>{a.value=o.data})}function k(){c.value=R(a.value),l.value=!0,p(!0,"login-modal")}function b(o){c.value=_.value?.find(t=>t.id===o),c.value.roles_selected=Q(c.value.roles),l.value=!1,p(!0,"login-modal")}function u(o){const t=a.value.reduce((C,B,y)=>(o.roles_selected[y]&&C.push(B.id),C),[]),T={...o};l.value?i("/login",{method:"POST",body:T,headers:d()}).then(C=>{m(C.data.id,t)}):i("/login",{method:"PATCH",body:T,headers:d()}).then(()=>{m(o.id,t)}),p(!1,"login-modal")}function s(){c.value=R(a.value),p(!1,"login-modal")}function m(o,t){i("/login-role",{method:"POST",body:{login_id:o,role_ids:t},headers:d()}).then(()=>{f()})}function L(o){n.value=_.value.find(t=>t.id===o),n.value&&p(!0,"login-delete-modal")}function V(){const o=n.value.id;!o||o===""||(i("/login/"+o,{method:"DELETE",headers:d()}).then(()=>{n.value=R(a.value),f()}),p(!1,"login-delete-modal"))}function F(){n.value=R(a.value),p(!1,"login-delete-modal")}function H(){r.value=S(),l.value=!0,p(!0,"role-modal")}function I(o){r.value=a.value?.find(t=>t.id===o),l.value=!1,p(!0,"role-modal")}function q(o){const t={...o};l.value?i("/role",{method:"POST",body:t,headers:d()}).then(()=>{h()}):i("/role",{method:"PATCH",body:t,headers:d()}).then(()=>{f(),h()}),p(!1,"role-modal")}function U(){r.value=S(),p(!1,"role-modal")}function G(o){r.value=a.value?.find(t=>t.id===o),r.value&&p(!0,"role-delete-modal")}function J(){const o=r.value.id;!o||o===""||(i("/role/"+o,{method:"DELETE",headers:d()}).then(()=>{r.value=S(),f(),h()}),p(!1,"role-delete-modal"))}function K(){r.value=S(),p(!1,"role-delete-modal")}function Q(o){return a.value.map(t=>o.includes(t.name))}return Y(()=>{f(),h()}),(o,t)=>{const T=ce,C=fe,B=Le;return x(),v(D,null,[t[6]||(t[6]=e("p",{class:"text-4xl"},"Admin",-1)),t[7]||(t[7]=e("p",{class:"mt-8 mb-2 text-2xl"},"Logins",-1)),e("button",{onClick:t[0]||(t[0]=y=>k()),class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800"},"Add Login"),e("div",Se,[e("table",Ae,[t[3]||(t[3]=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-400 dark:bg-gray-600 dark:text-gray-200"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"}," Email "),e("th",{scope:"col",class:"px-6 py-3"}," Roles "),e("th",{scope:"col",class:"px-6 py-3"}," Action ")])],-1)),e("tbody",null,[(x(!0),v(D,null,P(_.value,y=>(x(),v("tr",Me,[e("th",De,w(y.email_address),1),e("td",Ee,w(y.roles),1),e("td",Be,[e("a",{href:"#",onClick:j=>b(y.id),class:"font-medium text-blue-600 dark:text-blue-500 hover:underline"},"Edit",8,je),t[2]||(t[2]=O(" | ",-1)),e("a",{href:"#",onClick:j=>L(y.id),class:"font-medium text-blue-600 dark:text-blue-500 hover:underline"},"Delete",8,ze)])]))),256))])])]),t[8]||(t[8]=e("p",{class:"mt-8 mb-2 text-2xl"},"Roles",-1)),e("button",{onClick:t[1]||(t[1]=y=>H()),class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 me-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 focus:outline-none dark:focus:ring-blue-800"},"Add Role"),e("div",Ne,[e("table",Pe,[t[5]||(t[5]=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-400 dark:bg-gray-500 dark:text-gray-200"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"}," Name "),e("th",{scope:"col",class:"px-6 py-3"}," Description "),e("th",{scope:"col",class:"px-6 py-3"}," Action ")])],-1)),e("tbody",null,[(x(!0),v(D,null,P(a.value,y=>(x(),v("tr",Ve,[e("th",Oe,w(y.name),1),e("th",Fe,w(y.description),1),e("td",He,[e("a",{href:"#",onClick:j=>I(y.id),class:"font-medium text-blue-600 dark:text-blue-500 hover:underline"},"Edit",8,Ie),t[4]||(t[4]=O(" | ",-1)),e("a",{href:"#",onClick:j=>G(y.id),class:"font-medium text-blue-600 dark:text-blue-500 hover:underline"},"Delete",8,qe)])]))),256))])])]),M(T,{id:"login-modal",class:"hidden",login:c.value,roles:a.value,onClickSubmit:u,onClickCancel:s,titleText:(l.value?"Add":"Edit")+" Login"},null,8,["login","roles","titleText"]),M(C,{id:"login-delete-modal",class:"hidden",onClickSubmit:V,onClickCancel:F,recordType:"Login",name:n.value.email_address},null,8,["name"]),M(B,{id:"role-modal",class:"hidden",role:r.value,onClickSubmit:q,onClickCancel:U,titleText:(l.value?"Add":"Edit")+" Role"},null,8,["role","titleText"]),M(C,{id:"role-delete-modal",class:"hidden",onClickSubmit:J,onClickCancel:K,recordType:"Role",name:r.value.name},null,8,["name"])],64)}}});export{Qe as default};
